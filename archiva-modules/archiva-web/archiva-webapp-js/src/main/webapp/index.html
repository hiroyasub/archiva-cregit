<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/chosen-0.9.7.css"/>
  <link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css"/>
  <link rel="stylesheet" href="css/bootstrap.2.0.2.css">
  <link rel="stylesheet" href="css/archiva.css">


  <script type="text/javascript" src="js/jquery-1.7.2.js"></script>

  <script type="text/javascript" src="js/require.1.0.7.js"></script>

  <title>Apache Archiva</title>

</head>

<body style="padding-top: 42px;">

<div id="topbar-menu-container"></div>

<div class="container-fluid" style="min-height: 550px">
  <div class="row-fluid">
    <div class="span2 columns">
      <div class="well sidebar-nav" id="sidebar-content"></div>
    </div>
    <div class="span10 columns">
      <div class="content">
        <div id="user-messages"></div>
        <div id="main-content"></div>
    </div>
  </div>
  </div>

</div>

<footer id="footer-content" style="vertical-align: bottom">
</footer>

<div id="html-fragments"></div>

<div id="dialog-confirm" title="" style="display: none">
</div>



<script type="text/javascript">


    appendArchivaVersion=function(){
      return "_archivaVersion="+window.archivaRuntimeInfo.version;
    }

    timestampNoCache=function(){
      if (!window.archivaDevMode){
        return "";
      }
      return "&_="+jQuery.now();
    }

    appendTemplateUrl=function(){
      return appendArchivaVersion()+timestampNoCache();
    }

    $.ajax({
        url: "restServices/archivaUiServices/runtimeInfoService/archivaRuntimeInfo/en",
        dataType: 'json',
        success:function(data){

            window.archivaDevMode=data.devMode;
            window.archivaJavascriptLog=data.javascriptLog;
            window.archivaRuntimeInfo=data;

                require.config({
                    baseUrl: "js/",
                    urlArgs: ""+appendTemplateUrl(),
                    paths: {
                        "i18n":"jquery.i18n.properties-1.0.9",
                        "jquery": "jquery-1.7.2",
                        "jquery.tmpl": "jquery.tmpl",
                        "utils": "archiva/utils",
                        "jquery.ui.widget": "jquery-ui-1.8.16.custom.min",
                        "jquery.cookie": "jquery.cookie.1.0.0",
                        "bootstrap": "bootstrap.2.0.2",
                        "choosen": "chosen.jquery-0.9.7",
                        "jquery.validate": "jquery.validate-1.9.0",
                        "jquery.json": "jquery.json-2.3.min",
                        "knockout": "knockout-2.0.0.debug",
                        "knockout.simpleGrid": "knockout.simpleGrid",
                        "knockout.sortable": "knockout-sortable",
                        "redback": "redback/redback",
                        "general-admin":"archiva/general-admin",
                        "redback-templates": "redback/redback-tmpl",
                        "main-templates": "archiva/main-tmpl",
                        "repositories": "archiva/repositories",
                        "network-proxies": "archiva/network-proxies",
                        "proxy-connectors": "archiva/proxy-connectors",
                        "repository-groups": "archiva/repository-groups",
                        "roles": "redback/roles",
                        "user": "redback/user",
                        "users": "redback/users",
                        "archiva/main": "archiva/main"
                    }
                    // file upload dependencies
                    //.script("jquery.iframe-transport-1.4.js").wait()
                    //.script("jquery.fileupload-5.10.0.js").wait()
                    //.script("jquery.fileupload-ip-1.0.6.js").wait()
                    //.script("jquery.fileupload-ui-6.6.3.js" ).wait()
                });




                require(['order!domReady','order!jquery','order!i18n','order!startup'], function (domReady) {
                  domReady.withResources(function () {
                      $.ajax({
                          url: "restServices/archivaUiServices/runtimeInfoService/archivaRuntimeInfo/"+usedLang(),
                          dataType: 'json',
                          success:function(data){
                              window.archivaDevMode=data.devMode;
                              window.archivaJavascriptLog=data.javascriptLog;
                              window.archivaRuntimeInfo=data;


                              require(['order!domReady','archiva/main'],function (domReady) {
                                  domReady.withResources(function () {
                                      startArchivaApplication();
                                  })
                              })



                          }
                      })
                  })
                });
        }
    })


</script>
</body>
</html>

<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="css/chosen-0.9.7.css"/>
  <link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css"/>
  <link rel="stylesheet" href="css/bootstrap.2.0.2.css">
  <link rel="stylesheet" href="css/archiva.css">


  <script type="text/javascript" src="js/jquery-1.7.2.js"></script>

  <script type="text/javascript" src="js/lab.js"></script>

  <script type="text/javascript" src="js/require.1.0.7.js"></script>
  <script type="text/javascript" src="js/jquery.i18n.properties-1.0.9.js"></script>

  <title>Apache Archiva</title>

</head>

<body style="padding-top: 42px;">

<div id="topbar-menu-container"></div>

<div class="container-fluid" style="min-height: 550px">
  <div class="row-fluid">
    <div class="span2 columns">
      <div class="well sidebar-nav" id="sidebar-content"></div>
    </div>
    <div class="span10 columns">
      <div class="content">
        <div id="user-messages"></div>
        <div id="main-content"></div>
    </div>
  </div>
  </div>

</div>

<footer id="footer-content" style="vertical-align: bottom">
</footer>

<div id="html-fragments"></div>

<div id="dialog-confirm" title="" style="display: none">
</div>



<script type="text/javascript">

        require.config({
            baseUrl: "js/",
            urlArgs: "_="+new Date().getTime(),
            "paths": {
                "i18n":"jquery.i18n.properties-1.0.9",
                "jquery": "jquery-1.7.2",
                "jquery_tmpl": "jquery.tmpl",
                "utils": "archiva/utils",
                "jquery_ui": "jquery-ui-1.8.16.custom.min"
            }
        });
        require(['domReady','startup','jquery'], function (domReady) {
          domReady.withResources(function () {

              $.ajax(
                {
                  url: "restServices/archivaUiServices/runtimeInfoService/archivaRuntimeInfo/"+usedLang(),
                  dataType: 'json',
                  success:function(data){
                      window.archivaDevMode=data.devMode;
                      window.archivaJavascriptLog=data.javascriptLog;
                      window.archivaRuntimeInfo=data;

                      require.config({
                          baseUrl: "js/",
                          "paths": {
                              "redback": buildLoadJsUrl("redback/redback.js"),
                              "i18nLoad":  buildLoadJsUrl("archiva/i18nload.js")
                          }
                      });

                      // CacheBust is for dev purpose use false in prod env !
                      var options = {
                          AlwaysPreserveOrder:true,
                          BasePath:"js/",
                          explicit_preloading:false,
                          CacheBust:window.archivaDevMode
                      };
                      $LAB.setGlobalDefaults(options);
                      $LAB
                         //.script(buildLoadJsUrl("jquery.tmpl.js")).wait()
                         //.script(buildLoadJsUrl("archiva/utils.js")).wait()
                         .script(buildLoadJsUrl("archiva/i18nload.js")).wait()
                         .script("jquery.cookie.1.0.0.js").wait()
                         .script("knockout-2.0.0.debug.js").wait()
                         //.script("jquery-ui-1.8.16.custom.min.js").wait()
                         .script("jquery.validate-1.9.0.js").wait()
                         .script("jquery.json-2.3.min.js").wait()
                         .script(buildLoadJsUrl("archiva/main-tmpl.js")).wait()
                         .script(buildLoadJsUrl("archiva/general-admin.js"))
                         .script(buildLoadJsUrl("archiva/repositories.js")).wait()
                         .script(buildLoadJsUrl("archiva/network-proxies.js")).wait()
                         .script(buildLoadJsUrl("archiva/proxy-connectors.js")).wait()
                         .script(buildLoadJsUrl("redback/operation.js")).wait()
                         .script(buildLoadJsUrl("archiva/repository-groups.js")).wait()
                         .script(buildLoadJsUrl("archiva/search.js")).wait()
                         .script(buildLoadJsUrl("redback/redback-tmpl.js")).wait()
                         .script("chosen.jquery-0.9.7.js" )
                         .script("bootstrap.2.0.2.js" )
                         .script(buildLoadJsUrl("knockout.simpleGrid.js"))
                         .script(buildLoadJsUrl("knockout-sortable.js"))
                         //.script("jquery.iframe-transport-1.4.js").wait()
                         //.script("jquery.fileupload-5.10.0.js").wait()
                         //.script("jquery.fileupload-ip-1.0.6.js").wait()
                         //.script("jquery.fileupload-ui-6.6.3.js" ).wait()
                         .script(buildLoadJsUrl("redback/user.js")).wait()
                         .script(buildLoadJsUrl("redback/users.js")).wait()
                         //.script(buildLoadJsUrl("redback/redback.js")).wait()
                         .script(buildLoadJsUrl("redback/register.js")).wait()
                         .script(buildLoadJsUrl("redback/permission.js")).wait()
                         .script(buildLoadJsUrl("redback/resource.js")).wait()
                         .script(buildLoadJsUrl("redback/roles.js")).wait()
                         .script(buildLoadJsUrl("archiva/main.js"));
                  }
                })

          });
        });



</script>
</body>
</html>

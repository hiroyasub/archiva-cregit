<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<script id='ko_usersGrid_grid' type='text/x-jquery-tmpl'>
  <thead>
      <tr>
        {{each(i, columnDefinition) columns}}
          <th>${ columnDefinition.headerText }</th>
        {{/each}}
        <th>${$.i18n.prop('edit')}</th>
        <th>${$.i18n.prop('delete')}</th>
        <th>${$.i18n.prop('user.list.locked')}</th>
        <th>${$.i18n.prop('user.change.password.required')}</th>
      </tr>
  </thead>
  <tbody>
      {{each(i, row) itemsOnCurrentPage()}}
          <tr>
              {{each(j, columnDefinition) columns}}
              <td>${ typeof columnDefinition.rowText == 'function' ? columnDefinition.rowText(row) : row[columnDefinition.rowText] }</td>
              {{/each}}
              <td><a href="#" data-bind="click: function(){ editUserBox(row) }">Edit</a></td>
              {{if row.username()=="admin" || row.username()=="guest"}}
                <td></td>
              {{else}}
                <td>
                  <a href="#" data-bind="click: function(){ deleteUser(row) }" id="users-grid-delete-${row.username()}">
                    <img src="images/edit-cut.png" alt="${$.i18n.prop('delete')}"/>
                  </a>
                </td>
              {{/if}}
              {{if row.locked()==true}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/system-lock-screen.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ unlock(row) }"><img src="images/system-lock-screen.png"/></a>
                    {{/if}}
                </td>
              {{else}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/weather-clear.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ lock(row) }"><img src="images/weather-clear.png"/></a>
                    {{/if}}
                </td>
              {{/if}}

              {{if row.passwordChangeRequired()==true}}
                <td>
                    {{if row.username()=="admin" || row.username()=="guest"}}
                      <img src="images/dialog-error.png"/>
                    {{else}}
                      <a href="#" data-bind="click: function(){ passwordChangeRequire(row,false) }">
                          <img src="images/dialog-error.png"/>
                      </a>
                    {{/if}}
                </td>
              {{else}}
              <td>
                  {{if row.username()=="admin" || row.username()=="guest"}}
                    <img src="images/weather-clear.png"/>
                  {{else}}
                    <a href="#" data-bind="click: function(){ passwordChangeRequire(row,true) }">
                        <img src="images/weather-clear.png"/>
                    </a>
                  {{/if}}
              </td>
              {{/if}}
          </tr>
      {{/each}}
  </tbody>

</script>

<script id="usersGrid"  type="text/x-jquery-tmpl">
    <div class="page-header">
      <h2>${$.i18n.prop('users.list')}</h2>
    </div>
    <ul id="users-view-tabs" class="nav nav-tabs" data-target="#users-view-tabs-content">
      <li class="active" id="users-view-tabs-li-users-grid">
        <a data-toggle="tab" href="#users-view">${$.i18n.prop('users.grid.tab.title')}</a>
      </li>
      <li id="users-view-tabs-li-user-edit">
        <a data-toggle="tab" href="#createUserForm" id="users-view-tabs-li-user-edit-a">${$.i18n.prop('add')}</a>
      </li>
    </ul>
    <div id="users-view-tabs-content" class="tab-content">
      <div id="users-view" class="tab-pane">
        <button data-bind='click: sortByName'  class="btn">
            ${$.i18n.prop('users.sort.byname')}
        </button>
        <table class="table table-striped table-bordered" id="usersTable"
               data-bind="simpleGrid: gridViewModel,simpleGridTemplate:'ko_usersGrid_grid',pageLinksId:'usersPagination'">
        </table>
        <div id="usersPagination"></div>
      </div>
      <div id="createUserForm" class="tab-pane"></div>
    </div>
</script>


